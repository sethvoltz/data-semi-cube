#!/bin/bash

function usage {
    echo "Usage: $(basename $0) [-f|--no-daemon] <command> [<options>]" >&2
    echo "  Commands:" >&2
    echo "    start - start the service" >&2
    exit 2
}

daemon="yes"

# http://stackoverflow.com/a/12523979/772207
while getopts ':fh-' OPTION ; do
  case "$OPTION" in
    h ) usage ;;
    f ) daemon=""; shift ;;
    - ) [ $OPTIND -ge 1 ] && optind=$(expr $OPTIND - 1 ) || optind=$OPTIND
        eval OPTION="\$$optind"
        OPTARG=$(echo $OPTION | cut -d'=' -f2)
        OPTION=$(echo $OPTION | cut -d'=' -f1)
        case $OPTION in
            --no-daemon ) daemon="" ;;
            --help      ) usage ;;
            --          ) shift; break;;
            * ) usage ;;
        esac
       OPTIND=1
       shift
      ;;
    ? ) usage ;;
  esac
done

cmd=shift

if [ -z "$cmd" ]; then
    echo "No command specified" >&2
    usage
fi

function cmd_start () {
  echo "Starting Data Semi-Cube... [ DONE ]"
}

function cmd_stop () {
  echo "Stopping Data Semi-Cube... [ DONE ]"
}

function cmd_restart () {
  cmd_stop
  cmd_start
}

function cmd_status () {
  echo "Data Semi-Cube... [ STOPPED ]"
}

case $cmd in
  start   ) cmd_start   "$@" ;;
  stop    ) cmd_stop    "$@" ;;
  restart ) cmd_restart "$@" ;;
  status  ) cmd_status  "$@" ;;
  *       ) usage ;;
esac
